module.exports=[16481,a=>{"use strict";var b=a.i(87924),c=a.i(70106);let d=(0,c.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),e=(0,c.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var f=a.i(7998);let g=[{id:"post-register",method:"POST",path:"/api/register",description:"Register a new Playdate device. Returns a one-time secret token that must be stored securely - it cannot be retrieved again. Can also be used to update profile (displayName, avatar) when authenticated.",auth:!1,requestBody:{fields:[{name:"displayName",type:"string",required:!1,description:"Optional display name for the device (max 100 chars)"},{name:"avatar",type:"string",required:!1,description:"Bird avatar: BIRD1-BIRD12 (default: BIRD1)"}],example:{displayName:"My Playdate",avatar:"BIRD4"}},responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the registration was successful"},{name:"deviceId",type:"string",description:"Unique identifier for the device"},{name:"secretToken",type:"string",description:"Secret token for authentication (store securely!)"},{name:"avatar",type:"string",description:"Selected bird avatar (BIRD1-BIRD12)"},{name:"message",type:"string",description:"Human-readable status message"}],example:{success:!0,deviceId:"a0dcb007051f88c0aef99bf01ffe224b...",secretToken:"bvUKW9vBPZS8GHtCXe3k8jSm56BQDP...",avatar:"BIRD4",message:"Device registered successfully. Store this token securely - it cannot be retrieved again."}},errors:[{status:429,description:"Rate limit exceeded (max 10 registrations per minute)"},{status:500,description:"Server configuration error"}]},{id:"get-battles",method:"GET",path:"/api/battles",description:"List all public battles. Private battles are excluded from this listing.",auth:!1,responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the request was successful"},{name:"battles",type:"Battle[]",description:"Array of public battle objects"}],example:{success:!0,battles:[{battleId:"e0a5b571c0ddc493",player1DeviceId:"a0dcb007...",player2DeviceId:null,status:"pending",currentTurn:0,isPrivate:!1}]}}},{id:"post-battles",method:"POST",path:"/api/battles",description:"Create a new battle session. The authenticated device becomes player 1.",auth:!0,requestBody:{fields:[{name:"mapData",type:"object",required:!1,description:"Optional map configuration data"},{name:"isPrivate",type:"boolean",required:!1,description:"If true, battle won't appear in public listings (default: false)"}],example:{mapData:{type:"forest",size:10},isPrivate:!0}},responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the battle was created"},{name:"battle",type:"object",description:"Created battle summary"},{name:"message",type:"string",description:"Human-readable status message"}],example:{success:!0,battle:{battleId:"a99958640027f6bc",status:"pending",currentTurn:0,isPrivate:!0},message:"Private battle created. Share the battleId with your opponent to join."}},errors:[{status:401,description:"Device authentication required"}]},{id:"get-battles-id",method:"GET",path:"/api/battles/:id",description:"Get detailed information about a specific battle including current state.",auth:!1,responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the request was successful"},{name:"battle",type:"Battle",description:"Full battle object with all fields"}],example:{success:!0,battle:{battleId:"e0a5b571c0ddc493",player1DeviceId:"a0dcb007...",player2DeviceId:"f55c9b25...",status:"active",currentTurn:3,currentPlayerIndex:1,mapData:{type:"forest"},isPrivate:!1,createdAt:"2026-01-23T00:46:56.440Z",updatedAt:"2026-01-23T01:15:22.100Z"}}},errors:[{status:404,description:"Battle not found"}]},{id:"patch-battles-id",method:"PATCH",path:"/api/battles/:id",description:'Join a pending battle as player 2. The battle status changes from "pending" to "active".',auth:!0,responseBody:{fields:[{name:"success",type:"boolean",description:"Whether joining was successful"},{name:"battle",type:"Battle",description:"Updated battle object"},{name:"message",type:"string",description:"Human-readable status message"}],example:{success:!0,battle:{battleId:"e0a5b571c0ddc493",status:"active",currentTurn:0},message:"Successfully joined battle. You are player 2."}},errors:[{status:400,description:"Battle is not in pending status"},{status:401,description:"Device authentication required"},{status:404,description:"Battle not found"}]},{id:"get-mybattles",method:"GET",path:"/api/mybattles",description:"List all battles for the authenticated device. Auto-forfeits opponents who haven't moved in 7 days. Supports ?status= filter.",auth:!0,requestBody:{fields:[{name:"status",type:"string",required:!1,description:"Query param filter: pending, active, completed, abandoned"}],example:{status:"active"}},responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the request was successful"},{name:"battles",type:"Battle[]",description:"Array of battles where device is player1 or player2"},{name:"battles[].winnerId",type:"string|null",description:"Winner device ID (null if ongoing)"},{name:"battles[].endReason",type:"string|null",description:"How ended: victory, forfeit, draw"},{name:"battles[].lastTurnAt",type:"string|null",description:"ISO timestamp of last turn"},{name:"count",type:"number",description:"Total number of battles returned"}],example:{success:!0,battles:[{battleId:"e0a5b571c0ddc493",status:"active",winnerId:null,endReason:null,lastTurnAt:"2025-01-20T10:30:00.000Z"},{battleId:"a99958640027f6bc",status:"completed",winnerId:"abc123...",endReason:"forfeit"}],count:2}},errors:[{status:401,description:"Device authentication required"}]},{id:"post-turns",method:"POST",path:"/api/turns",description:"Submit a turn with actions. Only the current active player can submit. Turns are validated for proper sequencing.",auth:!0,requestBody:{fields:[{name:"battleId",type:"string",required:!0,description:"The battle to submit the turn for"},{name:"actions",type:"Action[]",required:!0,description:"Array of actions (max 100). Must include end_turn action."},{name:"gameState",type:"object",required:!1,description:"Optional game state snapshot (max 50KB)"}],example:{battleId:"e0a5b571c0ddc493",actions:[{type:"move",unitId:"u1",from:{x:1,y:2},to:{x:3,y:2}},{type:"attack",unitId:"u1",targetId:"enemy1"},{type:"end_turn"}],gameState:{units:[],resources:100}}},responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the turn was submitted"},{name:"turn",type:"object",description:"Submitted turn summary"},{name:"battle",type:"object",description:"Updated battle state"},{name:"message",type:"string",description:"Human-readable status message"}],example:{success:!0,turn:{turnId:"abc123...",turnNumber:4,isValid:!0,validationErrors:[]},battle:{battleId:"e0a5b571c0ddc493",currentTurn:4,currentPlayerIndex:0,status:"active"},message:"Turn submitted successfully"}},errors:[{status:400,description:"Invalid request body or battle not active"},{status:401,description:"Device authentication required"},{status:403,description:"Not your turn or not a battle participant"},{status:409,description:"Turn already submitted (duplicate)"},{status:413,description:"Request payload too large"}]},{id:"get-turns",method:"GET",path:"/api/turns?battleId=:id",description:"Get turn history for a specific battle.",auth:!1,responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the request was successful"},{name:"turns",type:"Turn[]",description:"Array of turn objects in order"}],example:{success:!0,turns:[{turnId:"abc123...",turnNumber:1,deviceId:"a0dcb007...",actions:[],isValid:!0},{turnId:"def456...",turnNumber:2,deviceId:"f55c9b25...",actions:[],isValid:!0}]}},errors:[{status:400,description:"Battle ID is required"}]},{id:"get-stats",method:"GET",path:"/api/stats",description:"Get player statistics for the authenticated device. Includes battle counts, win/loss record, and total turns submitted.",auth:!0,responseBody:{fields:[{name:"success",type:"boolean",description:"Whether the request was successful"},{name:"stats",type:"object",description:"Player statistics object"},{name:"stats.deviceId",type:"string",description:"Device identifier"},{name:"stats.displayName",type:"string",description:"Device display name"},{name:"stats.avatar",type:"string",description:"Bird avatar (BIRD1-BIRD12)"},{name:"stats.memberSince",type:"string",description:"ISO date when device was registered"},{name:"stats.totalBattles",type:"number",description:"Total battles participated in"},{name:"stats.completedBattles",type:"number",description:"Battles that have ended"},{name:"stats.activeBattles",type:"number",description:"Currently active battles"},{name:"stats.pendingBattles",type:"number",description:"Battles waiting for opponent"},{name:"stats.wins",type:"number",description:"Total victories"},{name:"stats.losses",type:"number",description:"Total defeats"},{name:"stats.draws",type:"number",description:"Battles with no winner"},{name:"stats.winRate",type:"string",description:'Win percentage (e.g., "66.7%")'},{name:"stats.totalTurnsSubmitted",type:"number",description:"Total turns submitted across all battles"}],example:{success:!0,stats:{deviceId:"a0dcb007051f88c0...",displayName:"My Playdate",avatar:"BIRD4",memberSince:"2025-01-15T10:30:00.000Z",totalBattles:15,completedBattles:12,activeBattles:2,pendingBattles:1,wins:8,losses:3,draws:1,winRate:"66.7%",totalTurnsSubmitted:142}}},errors:[{status:401,description:"Device authentication required"},{status:500,description:"Server error"}]}];function h(){return(0,b.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,b.jsx)(f.default,{}),(0,b.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"API Reference"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Complete documentation for the Bird Wars async battle server API. All authenticated endpoints require a Bearer token in the Authorization header."}),(0,b.jsxs)("div",{className:"mt-4 p-4 rounded-lg border border-border bg-card",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Authentication"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["For endpoints marked with ",(0,b.jsx)(d,{className:"w-3 h-3 inline"}),", include your secret token:"]}),(0,b.jsx)("code",{className:"text-sm bg-muted px-2 py-1 rounded font-mono",children:"Authorization: Bearer <your-secret-token>"})]})]}),(0,b.jsx)("div",{className:"space-y-12",children:g.map(a=>(0,b.jsx)("section",{id:a.id,className:"scroll-mt-24","data-testid":`endpoint-${a.id}`,children:(0,b.jsxs)("div",{className:"border border-border rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 bg-card border-b border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-mono font-bold ${function(a){switch(a){case"GET":return"bg-chart-2/10 text-chart-2";case"POST":return"bg-primary/10 text-primary";case"PATCH":return"bg-chart-4/10 text-chart-4";case"DELETE":return"bg-destructive/10 text-destructive";default:return"bg-muted text-muted-foreground"}}(a.method)}`,children:a.method}),(0,b.jsx)("code",{className:"text-sm font-mono font-semibold",children:a.path}),a.auth?(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs bg-chart-4/10 text-chart-4",children:[(0,b.jsx)(d,{className:"w-3 h-3"}),"Auth Required"]}):(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs bg-chart-2/10 text-chart-2",children:[(0,b.jsx)(e,{className:"w-3 h-3"}),"Public"]})]}),(0,b.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:a.description})]}),(0,b.jsxs)("div",{className:"p-4 space-y-6",children:[a.requestBody&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-3",children:"Request Body"}),(0,b.jsx)("div",{className:"space-y-2 mb-4",children:a.requestBody.fields.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,b.jsx)("code",{className:"bg-muted px-1.5 py-0.5 rounded font-mono text-xs",children:a.name}),(0,b.jsx)("span",{className:"text-muted-foreground",children:a.type}),a.required?(0,b.jsx)("span",{className:"text-xs text-destructive",children:"required"}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"optional"}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["— ",a.description]})]},a.name))}),(0,b.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Example:"}),(0,b.jsx)("pre",{className:"text-xs font-mono overflow-x-auto",children:JSON.stringify(a.requestBody.example,null,2)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-3",children:"Response"}),(0,b.jsx)("div",{className:"space-y-2 mb-4",children:a.responseBody.fields.map(a=>(0,b.jsxs)("div",{className:"flex items-start gap-2 text-sm",children:[(0,b.jsx)("code",{className:"bg-muted px-1.5 py-0.5 rounded font-mono text-xs",children:a.name}),(0,b.jsx)("span",{className:"text-muted-foreground",children:a.type}),(0,b.jsxs)("span",{className:"text-muted-foreground",children:["— ",a.description]})]},a.name))}),(0,b.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Example (200 OK):"}),(0,b.jsx)("pre",{className:"text-xs font-mono overflow-x-auto",children:JSON.stringify(a.responseBody.example,null,2)})]})]}),a.errors&&a.errors.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-semibold mb-3",children:"Error Responses"}),(0,b.jsx)("div",{className:"space-y-1",children:a.errors.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs font-mono bg-destructive/10 text-destructive",children:a.status}),(0,b.jsx)("span",{className:"text-muted-foreground",children:a.description})]},a.status))})]})]})]})},a.id))}),(0,b.jsxs)("div",{className:"mt-16 p-6 rounded-lg border border-border bg-card",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Data Types"}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Battle"}),(0,b.jsxs)("div",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"battleId"})," — Unique battle identifier"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"player1DeviceId"})," — Device ID of player 1 (creator)"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"player2DeviceId"})," — Device ID of player 2 (null if pending)"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"status"}),' — "pending" | "active" | "completed" | "abandoned"']}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"currentTurn"})," — Current turn number (0-indexed)"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"currentPlayerIndex"})," — 0 for player1, 1 for player2"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"isPrivate"})," — Whether battle is hidden from public listing"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"mapData"})," — Custom map configuration object"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Action"}),(0,b.jsxs)("div",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"type"}),' — "move" | "attack" | "build" | "capture" | "wait" | "take_off" | "land" | "supply" | "end_turn"']}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"unitId"})," — Identifier of the unit performing action"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"from"})," — Starting position ","{ x, y }"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"to"})," — Target position ","{ x, y }"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"targetId"})," — ID of target unit (for attacks)"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"data"})," — Additional action-specific data"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium mb-2",children:"Turn"}),(0,b.jsxs)("div",{className:"text-sm space-y-1 text-muted-foreground",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"turnId"})," — Unique turn identifier"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"battleId"})," — Associated battle"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"deviceId"})," — Device that submitted the turn"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"turnNumber"})," — Sequential turn number"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"actions"})," — Array of actions in this turn"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"isValid"})," — Whether the turn passed validation"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("code",{className:"bg-muted px-1 rounded",children:"gameState"})," — Snapshot of game state after turn"]})]})]})]})]})]}),(0,b.jsx)("footer",{className:"border-t border-border py-8 px-4 sm:px-6 lg:px-8 mt-12",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto text-center text-sm text-muted-foreground",children:(0,b.jsx)("p",{children:"Bird Wars Async Battle Server"})})})]})}a.s(["default",()=>h],16481)}];

//# sourceMappingURL=app_schema_page_tsx_ccca8b51._.js.map